
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Designing processes Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="API.html" />
    
    
    <link rel="prev" href="UI.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="WhyNussknacker.html">
            
                <a href="WhyNussknacker.html">
            
                    
                    What is Nussknacker and what it's good for
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Quickstart.html">
            
                <a href="Quickstart.html">
            
                    
                    Quickstart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Architecture.html">
            
                <a href="Architecture.html">
            
                    
                    Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Install.html">
            
                <a href="Install.html">
            
                    
                    How to install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="UI.html">
            
                <a href="UI.html">
            
                    
                    UI
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7" data-path="DesigningProcesses.html">
            
                <a href="DesigningProcesses.html">
            
                    
                    Designing processes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="API.html">
            
                <a href="API.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="FlinkIntegration.html">
            
                <a href="FlinkIntegration.html">
            
                    
                    Flink integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Metrics.html">
            
                <a href="Metrics.html">
            
                    
                    Monitoring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Configuration.html">
            
                <a href="Configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Security.html">
            
                <a href="Security.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Roadmap.html">
            
                <a href="Roadmap.html">
            
                    
                    Roadmap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Changelog.html">
            
                <a href="Changelog.html">
            
                    
                    Changelog/Versions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="PoweredBy.html">
            
                <a href="PoweredBy.html">
            
                    
                    Powered by Nussknacker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="GetInvolved.html">
            
                <a href="GetInvolved.html">
            
                    
                    Get involved
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="GLOSSARY.html">
            
                <a href="GLOSSARY.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Designing processes</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="designing-processes">Designing processes</h1>
<p>In this section you will learn how to create Nussknacker processes using defined <a href="GLOSSARY.html#model" class="glossary-term" title="Model describes your processes, 
includes data structures, and nodes definitions.  ">model</a>. In the examples we&apos;ll 
  use sample <a href="GLOSSARY.html#model" class="glossary-term" title="Model describes your processes, 
includes data structures, and nodes definitions.  ">model</a> that comes with Nussknacker distribution. You can find latest sources <a href="https://github.com/TouK/nussknacker/tree/master/engine/example/src/main/scala/" target="_blank">here</a>.</p>
<p>If you want to learn how to develop your own <a href="GLOSSARY.html#model" class="glossary-term" title="Model describes your processes, 
includes data structures, and nodes definitions.  ">model</a>, please see <a href="API.html">API section</a>  </p>
<h3 id="global-process-properties">Global process properties</h3>
<p>These include:</p>
<ul>
<li>parallelism (see <a href="https://flink.apache.org/faq.html#what-is-the-parallelism-how-do-i-set-it" target="_blank">Flink docs</a>)</li>
<li>checkpoint interval (see <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.3/setup/checkpoints.html" target="_blank">Flink docs</a>)</li>
<li>should state be kept in memory, or should RocksDB be used (see <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.3/ops/state_backends.html" target="_blank">Flink docs</a>)</li>
<li>properties for configuring ExceptionHandler of <a href="GLOSSARY.html#model" class="glossary-term" title="Model describes your processes, 
includes data structures, and nodes definitions.  ">model</a></li>
</ul>
<h3 id="process-variables">Process variables</h3>
<p>At beginning there is only one variable - <code>input</code>, contains single record for processing.</p>
<h3 id="expressions">Expressions</h3>
<p>Currently expressions in Nussknacker can be written using Spring Expression Language.
 You can find extensive documentation 
 <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html" target="_blank">here</a>.</p>
<h1 id="basic-nodes">Basic nodes</h1>
<p>Node works with data stream.
It can produce, fetch, send, collect data or organize data flow.</p>
<p>Each node has at least two parameters: <code>Id</code> and <code>Description</code>. 
Id has to be unique in process. It identifies node usage.
Description is just comment for node.</p>
<p>Depends on type, node could have input and output. 
Input if exists has to have exactly one assigned flow from another node.
Output could have multiple flows, or none, or could have at least one obligatory.</p>
<h2 id="filter">Filter</h2>
<p>Filter passes records which satisfies its condition.
It can have one or two outputs.
First output is for records satisfying the condition, second (optional) is for others.
<img src="img/filter_graph.png" alt="filter graph">
Records from <code>source</code> which meets condition go to <code>true sink</code>, and others go to <code>false sink</code>. </p>
<p><img src="img/filter_graph_single.png" alt="filter graph single"></p>
<p>Records from <code>source</code> which meets condition go to <code>blue sink</code>, and others are filtered out. </p>
<h3 id="parameters">Parameters</h3>
<p><img src="img/filter_window.png" alt="filter window">
There are two parameters: <code>Expression</code>, and <code>Disabled</code>.</p>
<p>Expression is written in SpEL. Should be evaluated to logical value. 
Outgoing data flow depends on expression result.</p>
<p>Disabled has logical value. 
If is checked, expression isn&apos;t evaluated, and returns value <code>true</code>.         </p>
<h3 id="flow">Flow</h3>
<p>Has input and one or two outputs. </p>
<p>If there is one output, only outgoing pipe is named <code>true</code>, 
and each record which expression evaluates to true passes.
Otherwise record is gone.</p>
<p>If there are two outputs, one pipe is named <code>true</code> and another <code>false</code>.
Each record which expression evaluates to <code>true</code> goes to <code>true</code> pipe,
and other record goes to <code>false</code> pipe.  </p>
<h2 id="split">Split</h2>
<p>It doesn&apos;t have additional parameters.
Each output receives all records and processes them independently. 
<img src="img/split_graph.png" alt="split graph"></p>
<p>Every record from <code>source</code> go to <code>sink 1</code> and <code>sink 2</code>.
<img src="img/split_window.png" alt="filter window"></p>
<h3 id="flow">Flow</h3>
<p>Have at least one output.
Each output has same record as input, so all outputs are identical.</p>
<h2 id="switch">Switch</h2>
<p>Distributes incoming data between outputs. 
<img src="img/switch_graph.png" alt="split graph">
Each record form <code>source</code> is tested against condition defined on edge. 
If <code>color</code> is <code>blue</code> record goes to <code>blue sink</code>. 
If <code>color</code> is <code>green</code> record goes to <code>green sink</code>. 
For every other value record goes to <code>sink for others</code>.</p>
<h3 id="parameters">Parameters</h3>
<p><img src="img/switch_window.png" alt="split graph"></p>
<p>There are two important parameters <code>Expression</code> and <code>exprVal</code>.
<code>Expression</code> contains expression which is evaluated for each record,
 and expression value is assigned to variable named like <code>exprVal</code> value.</p>
<p> In <code>Switch</code> node edges can be of one of two types.</p>
<p><img src="img/switch_edge_condition.png" alt="split graph"></p>
<p> Edge of <code>Type</code> <code>Condition</code> has <code>Expression</code>. 
 Record go to first output which condition it matches.</p>
<p><img src="img/switch_edge_default.png" alt="split graph"></p>
<p> There can be at most one edge of <code>Type</code> <code>Default</code>,
  and it gets all records that doesn&apos;t match to any <code>Condition</code> edge. </p>
<h3 id="flow">Flow</h3>
<p>For each record from input switch <code>Expression</code> is evaluated and result is assigned to <code>exprVal</code> variable.
After that records are tested against condition <code>Expressions</code> from output edges one by one.
Record goes to first output which condition it satisfies.
If record doesn&apos;t match any conditional output, and default output exists, record goes to default output.
Otherwise mismatching record is filtered out.</p>
<h2 id="variable">Variable</h2>
<p>Evaluates <code>Expression</code>, and assigns to <code>Variable Name.</code></p>
<p><img src="img/variable_graph.png" alt="split graph"></p>
<p>Doesn&apos;t change records flow. 
Have to have exactly one output.
Variable once defined cannot be overwritten.  </p>
<p><img src="img/variable_window.png" alt="split graph"></p>
<h2 id="map-variable">Map Variable</h2>
<p>Defines new variable with one or more fields. 
Each field value is evaluated by using <code>Expression</code>.  </p>
<p><img src="img/variable_object_window.png" alt="split graph"></p>
<p>Doesn&apos;t change records flow. MapVariable once defined cannot be overwritten.  </p>
<h3 id="subprocesses">Subprocesses</h3>
<p>Subprocesses let you abstract common used parts of process.
See <a href="Subprocesses.md">subprocesses</a> for more detailed description of how they work.</p>
<h3 id="using-custom-transformers">Using custom transformers</h3>
<p>Sometimes basic building blocks are not enough - you may want to code custom aggregations or other
statuful processing in <a href="GLOSSARY.html#flink" class="glossary-term" title="Apache Flink&#xAE; is an open-source stream processing framework for distributed, high-performing, always-available, and accurate data streaming applications. See https://flink.apache.org/">Flink</a>. 
See below for more detailed guide:</p>
<ul>
<li><a href="customTransformers/FlinkCustomTransformers.md">Flink transformers</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="UI.html" class="navigation navigation-prev " aria-label="Previous page: UI">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="API.html" class="navigation navigation-next " aria-label="Next page: API">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Designing processes","level":"1.7","depth":1,"next":{"title":"API","level":"1.8","depth":1,"path":"API.md","ref":"API.md","articles":[]},"previous":{"title":"UI","level":"1.6","depth":1,"path":"UI.md","ref":"UI.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"nussknackerVersion":"0.0.3","flinkMajorVersion":"1.3"},"plugins":["alerts"],"pluginsConfig":{"alerts":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"DesigningProcesses.md","mtime":"2019-10-08T14:26:12.672Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-10-08T14:34:34.378Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-alerts/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

